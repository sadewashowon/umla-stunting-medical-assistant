"""
Indonesian Stunting Knowledge Base Module
Berisi informasi komprehensif tentang stunting dalam bahasa Indonesia
"""

# Basis pengetahuan stunting komprehensif dalam bahasa Indonesia
STUNTING_KNOWLEDGE_ID = {
    "apa_itu_stunting": {
        "title": "Apa itu Stunting?",
        "content": """
        **Stunting** adalah kondisi di mana tinggi badan anak secara signifikan di bawah rata-rata untuk usianya. 
        Ini adalah bentuk malnutrisi yang mempengaruhi perkembangan fisik dan kognitif.
        
        **Karakteristik Utama:**
        - Tinggi-untuk-usia di bawah -2 standar deviasi dari standar pertumbuhan WHO
        - Biasanya terjadi dalam 1000 hari pertama kehidupan (konsepsi hingga usia 2 tahun)
        - Dapat memiliki efek jangka panjang pada kesehatan, pendidikan, dan produktivitas ekonomi
        - Sering tidak dapat diubah setelah usia 2-3 tahun
        
        **Dampak Global:**
        - Mempengaruhi sekitar 1 dari 4 anak di bawah 5 tahun secara global
        - Paling umum di Asia Selatan dan Sub-Sahara Afrika
        - Berkontribusi pada siklus kemiskinan antar generasi
        """,
        "keywords": ["apa itu", "definisi", "jelaskan", "stunting", "malnutrisi", "pendek", "kerdil"]
    },
    
    "penyebab": {
        "title": "Penyebab Stunting",
        "content": """
        Stunting terjadi karena interaksi kompleks dari berbagai faktor:
        
        **1. Faktor Nutrisi:**
        - **Asupan protein tidak memadai**: Penting untuk pertumbuhan dan perkembangan
        - **Kekurangan mikronutrien**: Zat besi, seng, vitamin A, yodium
        - **Praktik menyusui yang buruk**: Inisiasi terlambat, penghentian dini
        - **Makanan pendamping tidak memadai**: Kualitas dan kuantitas buruk setelah 6 bulan
        
        **2. Faktor Lingkungan:**
        - **Sanitasi dan kebersihan yang buruk**: Menyebabkan infeksi yang sering
        - **Akses air bersih terbatas**: Berkontribusi pada penyakit yang ditularkan melalui air
        - **Kondisi perumahan tidak memadai**: Kepadatan, ventilasi buruk
        - **Ketahanan pangan**: Akses yang tidak dapat diandalkan ke makanan bergizi
        
        **3. Faktor Maternal:**
        - **Nutrisi maternal yang buruk**: Sebelum dan selama kehamilan
        - **Kehamilan remaja**: Risiko komplikasi yang lebih tinggi
        - **Interval kelahiran pendek**: Kurang dari 18 bulan antara kehamilan
        - **Infeksi maternal**: HIV, malaria, tuberkulosis
        
        **4. Faktor Perawatan Kesehatan:**
        - **Akses terbatas ke perawatan kesehatan**: Perawatan prenatal dan postnatal
        - **Imunisasi tidak memadai**: Peningkatan risiko infeksi
        - **Pemantauan pertumbuhan yang buruk**: Kesempatan intervensi dini terlewat
        """,
        "keywords": ["penyebab", "mengapa", "alasan", "faktor", "menyebabkan", "mengakibatkan", "kenapa"]
    },
    
    "pencegahan": {
        "title": "Mencegah Stunting",
        "content": """
        Mencegah stunting memerlukan pendekatan komprehensif dan multi-sektoral:
        
        **Selama Kehamilan (1000 Hari Pertama - Konsepsi hingga Kelahiran):**
        - **Nutrisi maternal yang memadai**: Diet seimbang dengan kalori dan protein yang cukup
        - **Perawatan prenatal rutin**: Minimal 4 kunjungan selama kehamilan
        - **Suplemen zat besi dan asam folat**: Harian selama 6+ bulan
        - **Kenaikan berat badan yang memadai**: 11-16 kg untuk wanita dengan BMI normal
        - **Pencegahan penyakit**: Pencegahan malaria, pemberian obat cacing
        
        **Setelah Kelahiran (0-6 bulan):**
        - **Menyusui eksklusif**: Hanya ASI selama 6 bulan pertama
        - **Inisiasi dini**: Dalam 1 jam setelah kelahiran
        - **Pemberian makan yang sering**: Sesuai permintaan, 8-12 kali per hari
        - **Posisi yang tepat**: Pastikan transfer ASI yang efektif
        
        **6-24 bulan (Makanan Pendamping):**
        - **Pengenalan tepat waktu**: Mulai pada 6 bulan, tidak sebelum atau sesudah
        - **Frekuensi yang memadai**: 2-3 kali makan per hari pada 6-8 bulan, 3-4 kali pada 9-24 bulan
        - **Variasi makanan**: Termasuk protein, buah, sayuran, biji-bijian
        - **Keamanan makanan**: Persiapan dan penyimpanan yang bersih
        - **Menyusui berkelanjutan**: Hingga 2 tahun atau lebih
        
        **Tingkat Komunitas dan Kebijakan:**
        - **Akses air bersih dan sanitasi**: Mengurangi risiko infeksi
        - **Program pendidikan kesehatan**: Kesadaran nutrisi dan kebersihan
        - **Pengurangan kemiskinan**: Pemberdayaan ekonomi keluarga
        - **Fortifikasi makanan**: Menambahkan nutrisi ke makanan pokok
        - **Perlindungan sosial**: Transfer tunai, program bantuan makanan
        """,
        "keywords": ["cegah", "hindari", "hentikan", "bagaimana", "perlindungan", "intervensi", "mencegah"]
    },
    
    "pengobatan": {
        "title": "Pengobatan dan Penanganan Stunting",
        "content": """
        Meskipun stunting sering tidak dapat diubah setelah usia 2-3 tahun, intervensi dini dapat memperbaiki hasil:
        
        **1. Rehabilitasi Nutrisi:**
        - **Diet tinggi protein dan kalori**: 120-150% dari kebutuhan normal
        - **Suplemen mikronutrien**: Zat besi, seng, vitamin A, yodium
        - **Program pemberian makan terapeutik**: Makanan terapeutik siap pakai (RUTF)
        - **Makan kecil yang sering**: 5-6 kali makan per hari untuk penyerapan yang lebih baik
        
        **2. Perawatan Medis:**
        - **Pengobatan infeksi yang mendasari**: Antibiotik, antiparasit
        - **Penanganan komplikasi**: Anemia, defisiensi vitamin
        - **Pemantauan kesehatan rutin**: Pelacakan pertumbuhan, penilaian perkembangan
        - **Imunisasi catch-up**: Jadwal vaksinasi yang lengkap
        
        **3. Dukungan Jangka Panjang:**
        - **Dukungan nutrisi berkelanjutan**: Pemantauan dan suplemen rutin
        - **Pemantauan perkembangan**: Penilaian perkembangan kognitif dan motorik
        - **Pendidikan dan konseling keluarga**: Praktik nutrisi, kebersihan, perawatan
        - **Program kesiapan sekolah**: Dukungan perkembangan anak usia dini
        
        **4. Pertimbangan Khusus:**
        - **Malnutrisi akut berat**: Memerlukan perhatian medis segera
        - **Kondisi kronis**: HIV, tuberkulosis, kelainan bawaan
        - **Dukungan keluarga**: Mengatasi hambatan sosial dan ekonomi
        - **Integrasi komunitas**: Mengurangi stigma dan diskriminasi
        
        **Catatan Penting:**
        - Intervensi dini (sebelum usia 2) sangat penting untuk hasil yang lebih baik
        - Pengobatan memerlukan komitmen dan dukungan jangka panjang
        - Pencegahan lebih efektif dan hemat biaya daripada pengobatan
        - Keterlibatan keluarga dan komunitas sangat penting untuk keberhasilan
        """,
        "keywords": ["obati", "sembuhkan", "perbaiki", "bantu", "penanganan", "intervensi", "terapi", "pengobatan"]
    }
}

def get_indonesian_response(user_message):
    """Get response from Indonesian knowledge base"""
    user_message_lower = user_message.lower()
    
    # Check each knowledge category for relevant keywords
    for category, info in STUNTING_KNOWLEDGE_ID.items():
        if any(keyword in user_message_lower for keyword in info["keywords"]):
            return info["content"]
    
    # If no specific match, provide general information in Indonesian
    return """
    Saya dapat membantu Anda dengan informasi komprehensif tentang stunting. Berikut adalah topik utama yang dapat saya bahas:
    
    **ðŸ“š Topik yang Tersedia:**
    - **Apa itu stunting?** - Definisi, karakteristik, dan dampak global
    - **Penyebab** - Faktor nutrisi, lingkungan, maternal, dan perawatan kesehatan
    - **Pencegahan** - Strategi untuk berbagai tahap kehidupan
    - **Pengobatan** - Pendekatan penanganan dan intervensi
    
    **ðŸ’¡ Coba tanyakan tentang:**
    - "Apa penyebab stunting?"
    - "Bagaimana mencegah stunting?"
    - "Apa itu stunting?"
    - "Bagaimana mengobati stunting?"
    
    Silakan ajukan pertanyaan spesifik tentang topik-topik ini!
    """

def detect_indonesian(user_message):
    """Detect if the user message is in Indonesian"""
    indonesian_words = [
        'apa', 'bagaimana', 'kenapa', 'mengapa', 'kapan', 'dimana', 'siapa',
        'stunting', 'pendek', 'kerdil', 'nutrisi', 'gizi', 'makanan',
        'bayi', 'anak', 'ibu', 'hamil', 'kehamilan', 'menyusui', 'asi',
        'tinggi', 'berat', 'pertumbuhan', 'perkembangan', 'pencegahan',
        'pengobatan', 'penyebab', 'gejala', 'tanda', 'risiko', 'faktor'
    ]
    
    user_message_lower = user_message.lower()
    indonesian_count = sum(1 for word in indonesian_words if word in user_message_lower)
    
    # If more than 2 Indonesian words found, assume Indonesian
    return indonesian_count >= 2

if __name__ == "__main__":
    print("Indonesian Stunting Knowledge Base Module")
    print("=" * 50)
    print("Available topics:")
    for category, info in STUNTING_KNOWLEDGE_ID.items():
        print(f"- {info['title']}")
